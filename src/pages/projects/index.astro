---
import ProjectLayout from "@layouts/ProjectLayout.astro";
import { SITE_CONTENT } from "@config";
import { Image } from "astro:assets";
---

<ProjectLayout>
  <section class="py-4">
    <header class="mb-8">
      <h1 class="font-serif text-4xl font-bold tracking-tight text-slate-900">Projects</h1>
      <p class="mt-2 text-slate-700">A selection of client work and personal initiatives. Click any card to view details.</p>
    </header>

    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 items-stretch">
      {
        SITE_CONTENT.projects.map(({ name, summary, image, slug, linkPreview, linkSource }) => (
          <article class="rounded-2xl border border-slate-200 bg-white overflow-hidden shadow-sm flex h-full flex-col">
            <div class="relative h-56 w-full overflow-hidden">
              {slug ? (
                <a href={`/projects/${slug}`} aria-label={`${name} details`}>
                  <img src={image} alt={name} width="600" height="350" class="h-full w-full object-cover object-center transition-transform duration-300 hover:scale-105" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
                </a>
              ) : (
                <>
                  <img src={image} alt={name} width="600" height="350" class="h-full w-full object-cover object-center" />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"></div>
                </>
              )}
            </div>
            <div class="px-6 py-6 flex h-full flex-col">
              <h3 class="mb-3 font-serif text-2xl font-medium text-slate-900">
                {slug ? (
                  <a href={`/projects/${slug}`} class="hover:underline">
                    {name}
                  </a>
                ) : (
                  name
                )}
              </h3>
              <p class="text-base text-slate-700 mb-5 leading-relaxed">{summary}</p>
              <div class="mt-auto flex flex-wrap gap-3">
                {slug && (
                  <a href={`/projects/${slug}`} class="inline-flex items-center rounded-lg bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800">Details</a>
                )}
                {linkSource && (
                  <a href={linkSource} target="_blank" class="inline-flex items-center rounded-lg border px-4 py-2 text-sm font-medium text-slate-900 hover:bg-slate-50">Source</a>
                )}
                {linkPreview && (
                  <a href={linkPreview} target="_blank" class="inline-flex items-center rounded-lg border px-4 py-2 text-sm font-medium text-slate-900 hover:bg-slate-50">Preview</a>
                )}
              </div>
            </div>
          </article>
        ))
      }
    </div>
  </section>
</ProjectLayout>
