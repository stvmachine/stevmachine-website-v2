---
import Section from "./Section.astro";
import { Image } from "astro:assets";
import type { ProjectProps } from "@types";

interface Props {
  projects: ProjectProps[];
}

const { projects } = Astro.props;
---

<section class="py-24 bg-black" id="projects">
  <div class="mx-auto max-w-7xl px-5">
    <div class="mb-16 text-center">
      <h2 class="font-serif text-4xl md:text-5xl font-bold text-white mb-4">
        Featured Projects
      </h2>
      <p class="text-xl text-gray-400 max-w-2xl mx-auto">
        A showcase of my recent work and contributions
      </p>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {
        projects.map(
          ({ name, summary, image, linkPreview, linkSource, slug, accentColor }) => (
            <article class="group relative overflow-hidden rounded-2xl border border-gray-700 bg-gradient-to-br from-gray-900 to-gray-800 shadow-xl transition-all duration-300 hover:border-purple-500/50 hover:shadow-2xl hover:shadow-purple-500/10 flex flex-col h-full">
              {/* Project Image */}
              <div class="relative h-48 overflow-hidden">
                {slug ? (
                  <a href={`/projects/${slug}`} aria-label={`${name} details`}>
                    <Image
                      class="h-full w-full object-cover object-center transition-transform duration-500 group-hover:scale-110"
                      src={image}
                      alt={name}
                      width="600"
                      height="350"
                      loading="lazy"
                    />
                    <div class={`absolute inset-0 ${
                      name.includes('Good on You')
                        ? 'bg-gradient-to-t from-black/40 via-transparent to-transparent'
                        : 'bg-gradient-to-t from-black/60 via-transparent to-transparent'
                    }`} />
                  </a>
                ) : (
                  <>
                    <img
                      class={`h-full w-full transition-transform duration-500 group-hover:scale-110 ${
                        name.includes('Good on You') 
                          ? 'object-cover object-top' 
                          : 'object-cover object-center'
                      }`}
                      src={image}
                      alt={name}
                      width="600"
                      height="350"
                      loading="lazy"
                    />
                    <div class={`absolute inset-0 ${
                      name.includes('Good on You')
                        ? 'bg-gradient-to-t from-black/40 via-transparent to-transparent'
                        : 'bg-gradient-to-t from-black/60 via-transparent to-transparent'
                    }`} />
                  </>
                )}
                
              </div>

              {/* Project Content */}
              <div class="p-6 flex flex-col h-full">
                <div class="flex-grow space-y-4">
                  <h3 class="font-serif text-xl font-semibold text-white group-hover:text-purple-300 transition-colors duration-300">
                    {name}
                  </h3>
                  
                  <p class="text-sm text-gray-300 leading-relaxed line-clamp-3">
                    {summary}
                  </p>
                </div>

                {/* Action Buttons - Always at bottom */}
                <div class="flex flex-wrap gap-3 pt-4 mt-auto">
                  {linkPreview && (
                    <a
                      href={linkPreview}
                      target="_blank"
                      class="inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-white bg-gradient-to-r from-pink-500 to-purple-600 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-pink-500/25"
                    >
                      {linkPreview.includes('apps.apple.com') || linkPreview.includes('play.google.com') ? (
                        <>
                          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17.05 20.28c-.98.95-2.05.8-3 .08 1.18-1.91 1.09-5.19-4.03-11.23C5.62 4.19 3.57 3.98 2 3.98c.5 2.17 1.2 4.35 2.1 6.55-1.12 1.1-2.1 2.35-2.1 3.8 0 1.5 1.4 2.67 3.5 2.67 1.5 0 2.7-.84 2.7-.84s.5.53 1.8.53c1.3 0 2.2-.5 2.2-.5s.5.6 1.8.6c1.3 0 2.3-.6 2.3-.6s.3 1.1.8 2.1c-.5.2-1.1.3-1.7.3-1.1 0-2.1-.2-3.1-.5-1.6-.5-3.1-1.3-3.1-1.3s.2 1.8 2.6 2.9c1.9.9 3.5.9 4.5.9 1 0 2.1-.1 3.1-.3z"/>
                          </svg>
                          {linkPreview.includes('apps.apple.com') ? 'App Store' : 'Play Store'}
                        </>
                      ) : (
                        <>
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                          </svg>
                          Preview
                        </>
                      )}
                    </a>
                  )}
                </div>
              </div>

              {/* Hover effect overlay */}
              <div class="absolute inset-0 bg-gradient-to-t from-purple-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
            </article>
          ),
        )
      }
    </div>

    <!-- Explore Projects Message -->
    <div class="text-center mt-12">
      <p class="text-lg text-gray-400">
        Click on any project above to view detailed information
      </p>
    </div>
  </div>
</section>
