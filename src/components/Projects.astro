---
import Section from "./Section.astro";
import { Image } from "astro:assets";
import type { ProjectProps } from "@types";

interface Props {
  projects: ProjectProps[];
}

const { projects } = Astro.props;
---

<section class="py-24 bg-black" id="projects">
  <div class="mx-auto max-w-7xl px-5">
    <div class="mb-16 text-center">
      <h2 class="font-serif text-4xl md:text-5xl font-bold text-white mb-4">
        Featured Projects
      </h2>
      <p class="text-xl text-gray-400 max-w-2xl mx-auto">
        A showcase of my recent work and contributions
      </p>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {
        projects.map(
          ({ name, summary, image, linkPreview, linkSource, slug, accentColor }) => (
            <article class="group relative overflow-hidden rounded-2xl border border-gray-700 bg-gradient-to-br from-gray-900 to-gray-800 shadow-xl transition-all duration-300 hover:border-purple-500/50 hover:shadow-2xl hover:shadow-purple-500/10 flex flex-col h-full">
              {/* Project Image */}
              <div class="relative h-48 overflow-hidden">
                {slug ? (
                  <a href={`/projects/${slug}`} aria-label={`${name} details`}>
                    <Image
                      class="h-full w-full object-cover object-center transition-transform duration-500 group-hover:scale-110"
                      src={image}
                      alt={name}
                      width="600"
                      height="350"
                      loading="lazy"
                    />
                    <div class={`absolute inset-0 ${
                      name.includes('Good on You')
                        ? 'bg-gradient-to-t from-black/40 via-transparent to-transparent'
                        : 'bg-gradient-to-t from-black/60 via-transparent to-transparent'
                    }`} />
                  </a>
                ) : (
                  <>
                    <img
                      class={`h-full w-full transition-transform duration-500 group-hover:scale-110 ${
                        name.includes('Good on You') 
                          ? 'object-cover object-top' 
                          : 'object-cover object-center'
                      }`}
                      src={image}
                      alt={name}
                      width="600"
                      height="350"
                      loading="lazy"
                    />
                    <div class={`absolute inset-0 ${
                      name.includes('Good on You')
                        ? 'bg-gradient-to-t from-black/40 via-transparent to-transparent'
                        : 'bg-gradient-to-t from-black/60 via-transparent to-transparent'
                    }`} />
                  </>
                )}
                
              </div>

              {/* Project Content */}
              <div class="p-6 flex flex-col h-full">
                <div class="flex-grow space-y-4">
                  <h3 class="font-serif text-xl font-semibold text-white group-hover:text-purple-300 transition-colors duration-300">
                    {name}
                  </h3>
                  
                  <p class="text-sm text-gray-300 leading-relaxed line-clamp-3">
                    {summary}
                  </p>
                </div>

                {/* Action Buttons - Always at bottom */}
                <div class="flex flex-wrap gap-3 pt-4 mt-auto">
                  {linkSource && (
                    <a
                      href={linkSource}
                      target="_blank"
                      class="inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-white bg-gray-700 hover:bg-gray-600 rounded-lg transition-all duration-200 hover:scale-105"
                    >
                      {linkSource.includes('apps.apple.com') || linkSource.includes('play.google.com') ? (
                        <>
                          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                          </svg>
                          App Store
                        </>
                      ) : (
                        <>
                          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                          </svg>
                          Source
                        </>
                      )}
                    </a>
                  )}
                  
                  {linkPreview && (
                    <a
                      href={linkPreview}
                      target="_blank"
                      class="inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-all duration-200 hover:scale-105"
                    >
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                      </svg>
                      Preview
                    </a>
                  )}
                </div>
              </div>

              {/* Hover effect overlay */}
              <div class="absolute inset-0 bg-gradient-to-t from-purple-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
            </article>
          ),
        )
      }
    </div>

    <!-- Explore Projects Message -->
    <div class="text-center mt-12">
      <p class="text-lg text-gray-400">
        Click on any project above to view detailed information
      </p>
    </div>
  </div>
</section>
