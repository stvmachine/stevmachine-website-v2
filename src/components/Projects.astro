---
import Section from "./Section.astro";
import { Image } from "astro:assets";
import type { ProjectProps } from "@types";

interface Props {
  projects: ProjectProps[];
}

const { projects } = Astro.props;
---

<Section text="Featured Projects" href="projects">
  <div class="grid items-stretch gap-8 sm:grid-cols-2 lg:grid-cols-3">
    {
      projects.map(
        ({ name, summary, image, linkPreview, linkSource, slug }) => (
          <article class="flex h-full flex-col overflow-hidden rounded-2xl border border-neutral/20 bg-black bg-gradient-to-br from-[#1c232d]/90 to-[#0f1419]/90 backdrop-blur-sm">
            <div class="relative h-56 w-full overflow-hidden">
              {slug ? (
                <a href={`/projects/${slug}`} aria-label={`${name} details`}>
                  <Image
                    class="h-full w-full object-cover object-center transition-transform duration-300 hover:scale-105"
                    src={image}
                    alt={name}
                    width="600"
                    height="350"
                    loading="lazy"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent" />
                </a>
              ) : (
                <>
                  <Image
                    class="h-full w-full object-cover object-center"
                    src={image}
                    alt={name}
                    width="600"
                    height="350"
                    loading="lazy"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent" />
                </>
              )}
            </div>
            <div class="flex h-full flex-col px-6 py-6">
              <h3 class="mb-3 font-serif text-2xl font-medium text-primary">
                {slug ? (
                  <a href={`/projects/${slug}`} class="hover:underline">
                    {name}
                  </a>
                ) : (
                  name
                )}
              </h3>
              <p class="mb-5 text-base leading-relaxed text-neutral">
                {summary}
              </p>
              <div class="mt-auto flex flex-wrap gap-4 text-white">
                {slug && (
                  <a
                    href={`/projects/${slug}`}
                    class="group flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition-all duration-200 hover:scale-105 hover:bg-primary/90"
                  >
                    Details
                  </a>
                )}
                {linkPreview && (
                  <a
                    href={linkPreview}
                    target="_blank"
                    class="group flex items-center gap-2 rounded-lg bg-primary/10 px-4 py-2 text-sm font-medium transition-all duration-200 after:relative after:bottom-[-2px] after:transition-transform after:duration-200 after:content-[url(/external.svg)] group-hover:after:scale-110 hover:scale-105 hover:bg-primary/20"
                  >
                    Preview
                  </a>
                )}
              </div>
            </div>
          </article>
        ),
      )
    }
  </div>
</Section>
